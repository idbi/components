import{useRef as K}from"react";import{useGoogleMapCtx as R}from"../context/id-index.js";import U from"google-map-react";import{MarkerWrapper as j}from"../MarkerWrapper/id-index.js";import{MarkerIcon as L}from"../../../icons-v2/MarkerIcon/id-index.js";import{jsxs as W,jsx as m}from"react/jsx-runtime";const v={lat:-12.1245726,lng:-77.0266616},T=({children:u,defaultMarker:f=!0,defaultCenter:g,onMapLoad:l})=>{const{map:y,setMap:M,API_KEY:C,setMapCenter:p,coordinates:t,setCoordinates:k,setAddressState:x,editedAddressRef:n}=R(),r=K(null),G=(e,b)=>{const a={lat:e,lng:b};k(a),r.current||(r.current=new y.api.Geocoder),r.current.geocode({location:a},(d,A)=>{if(A!=="OK"||!d[0])return;const o=d[0],c=o.address_components.find(s=>s.types.includes("locality")),I=(c==null?void 0:c.long_name)||"",_=o.formatted_address;o.geometry&&p(o.geometry),x(s=>{const h=n!=null&&n.current?s.address:_;return{...a,locality:I,address:h}})})},i=!!(t.lat&&t.lng);return W(U,{defaultZoom:15,defaultCenter:g||(i?t:v),bootstrapURLKeys:{key:C,libraries:["places","geometry"]},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{M({loaded:!0,api:e.maps,instance:e.map}),l&&l(e.maps,e.map)},onClick:e=>{G((e==null?void 0:e.lat)||0,(e==null?void 0:e.lng)||0)},children:[f&&i&&m(j,{text:"Location",placement:"center-bottom",...t,children:m(L,{size:28})}),u]})};export{T as Map};
