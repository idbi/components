import{useRef as g,useState as T,useEffect as j}from"react";import{useOnClickOutside as z}from"../../hooks/id-useOnClickOutside.js";import{IconSearch as E}from"../../icons/IconSearch/id-index.js";import H from"../../icons/IconClose/id-index.js";import{IconButton as R}from"../buttons/IconButton/id-styles.js";import{Wrapper as W,InputContainer as _,Search as A,ContainerLoader as C,Loader as D,ContainerList as F,ItemList as N,CreateContainer as G}from"./id-styles.js";import{jsxs as B,jsx as n}from"react/jsx-runtime";const J=({show:k=!0,data:l,onSelectItem:s={hideOnSelect:!0,onSelect:()=>{}},getLabel:e,containerStyle:m,hideOnBlur:v=!0,enableScannerBehavior:x=!1,addCreateOption:r={show:!1,location:"top"},loading:$,searchRef:o,handleCleanOption:y,search:t})=>{var c;if(!k)return null;const i=g(null),[b,f]=T(!1);z([i,o],()=>{if(v)return f(!0)});const h=()=>{y(),f(!0)};j(()=>{f(!1)},[(c=o==null?void 0:o.current)==null?void 0:c.value]),j(()=>{(l==null?void 0:l.length)===1&&x&&(h(),s!=null&&s.onSelect&&s.onSelect(l[0]))},[l]);const w=()=>n(G,{onClick:()=>{r!=null&&r.onCreate&&(r==null||r.onCreate(t),h())},children:(r==null?void 0:r.text)||"Crear"});return B(F,{style:m,ref:i,active:Boolean(!b&&l&&t.length>=1),children:[r.show&&r.location==="top"&&w(),!$&&l&&l.length>0?l.map((u,q)=>{var L;return n(N,{onClick:()=>{s!=null&&s.onSelect&&s.onSelect(u),s!=null&&s.hideOnSelect&&h()},children:e?e(u):`${u.name} ${u.quantity} ${(L=u.kardex_unit)==null?void 0:L.symbol}`},`${q}search`)}):n(N,{style:{color:"#cbbcbb"},children:$?"Buscando":"Sin resultados"}),r.show&&r.location==="bottom"&&w()]})},Y=({onSearch:k,initSearch:l,placeholder:s,loading:e=!1,disabled:m=!1,addSearchIcon:v=!1,addCleanOption:x=!1,size:r="small",delay:$=400,alert:o=!1,foundItems:y})=>{const t=g(null),i=g(null),[b,f]=T(l||""),h=()=>{f(""),k("")},w=c=>{i.current!==null&&clearTimeout(i.current),f(c),i.current=setTimeout(()=>k(c),$)};return B(W,{children:[B(_,{disabled:m,children:[v&&n("div",{className:"icon",children:n(E,{})}),n(A,{ref:t,value:b,onChange:c=>{var u;return w(((u=c==null?void 0:c.target)==null?void 0:u.value)||"")},placeholder:s,addSearchIcon:v,addCleanOption:x,containerSize:r,disabled:m,alert:o}),x&&n(R,{onClick:()=>h(),className:"clean",children:n(H,{})})]}),n(C,{children:n(D,{active:e})}),n(J,{...y,loading:e,searchRef:t,handleCleanOption:h,search:b})]})};export{Y as Search,J as SearchResult};
