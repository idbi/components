import{useState as c,useEffect as s}from"react";import j from"../../../hooks/useFirstRender.js";import{CloseIcon as R}from"../../../icons-v2/CloseIcon/index.js";import{IconButton as b}from"../../buttons/IconButton/styles.js";import{UploadFileContainer as I}from"../UploadFileContainer/index.js";import{getURLData as a}from"../utils.js";import{Display as w,Img as L,ImgInfo as x,Placeholder as y,DefaultMessage as D}from"./styles.js";import{jsx as l,jsxs as o}from"react/jsx-runtime";const P=({initialImgUrl:p,placeholder:u,onChange:d,onError:m,acceptedFiles:f,validFileExtensions:g,noDisplay:h=!1})=>{const[e,t]=c(null),[r,i]=c(p||null),U=j();return s(()=>{let n="";return e&&(n=window.URL.createObjectURL(e),i(n)),()=>{n&&window.URL.revokeObjectURL(n)}},[e]),s(()=>{U||d(e,r||null)},[r]),l(I,{onError:m||alert,onSelectFile:n=>t(n),acceptedFiles:f,validFileExtensions:g,children:r&&!h?o(w,{children:[o(L,{children:[((e==null?void 0:e.type.includes("image"))||r.includes("jpeg")||r.includes("jpg")||r.includes("webp")||r.includes("png"))&&l("img",{src:r,alt:""}),o(x,{children:[l("span",{children:(e==null?void 0:e.name)||a(r)[0]}),l("span",{children:(e==null?void 0:e.type)||a(r)[1]})]})]}),l(b,{variant:"secondary",onClick:n=>{n.stopPropagation(),t(null),i(null)},children:l(R,{size:12})})]}):l(y,{children:u||o(D,{children:["Sube un archivo ",l("span",{children:"aqu\xED"})]})})})};export{P as UploadMedia};
