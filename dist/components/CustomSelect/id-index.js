import{useOnClickOutside as E}from"../../hooks/id-useOnClickOutside.js";import O from"../../icons/DownArrowIcon/id-index.js";import T from"../../icons/SearchIcon/id-index.js";import{forwardRef as U,useRef as L,useState as d,useCallback as m}from"react";import{TextInput as W}from"../TextInput/id-index.js";import"../Typography/TextBuilder/id-index.js";import{jsxs as u,jsx as t}from"react/jsx-runtime";import{Text as f}from"../Typography/Text/id-index.js";import{Wrapper as j,OptionsManager as z}from"./id-styles.js";const K=U(({label:h,searchable:b=!0,autoSize:N,value:s,options:l,placeholder:R="Seleccione una opci\xF3n",fullWidth:S,fullWidthOptions:y,onChange:H,formatOptionLabel:n,formatSelectedOption:p})=>{const c=L(null),[k,o]=d(l),[C,w]=d(""),[i,a]=d(!1);E(c,()=>{a(!1)});const I=m(()=>{const e=l.filter(r=>r.label.toLowerCase().includes(C.toLowerCase()));o(e)},[l,s]),g=m(e=>{H(l.find(r=>r.label===e)),a(!1),w(""),o(l)},[I]),v=m(e=>{w(e.target.value);const r=l.filter(x=>x.label.toLowerCase().includes(e.target.value.toLowerCase()));o(r)},[]),A=()=>{const e=c.current;if(e){const r=e.getBoundingClientRect();return window.innerHeight-r.bottom-20}};return u(j,{fullWidth:S,ref:c,children:[h&&t(f,{as:"label",align:"left",size:"sm",color:"NEUTRAL/700",pl:"0.05rem",mb:"0.25rem",children:h}),u("div",{className:"select-btn",onClick:()=>a(!i),tabIndex:0,onKeyUpCapture:e=>{e.key==="Enter"&&a(!i)},children:[t(f,{as:"span",color:"NEUTRAL/700",mr:"0.5rem",children:p?p(s):n?n(s):s.label}),t(O,{size:20})]}),i&&u(z,{maxOptionsHeight:N?A():285,fullWidthOptions:y,children:[b&&t("div",{className:"search-box",children:t(W,{leftAddon:t(T,{}),type:"text",placeholder:R,value:C,onChange:v,fullWidth:!0})}),t("div",{className:"options",children:k.map(e=>t(f,{as:"li",color:"NEUTRAL/700",className:e.value===s.value?"selected":"",tabIndex:0,onClick:()=>g(e.label),onKeyUpCapture:r=>{r.key==="Enter"&&g(e.label)},children:n?n(e):e.label},`${e.label}-${e.value}`))})]})]})});K.displayName="CustomSelect";export{K as CustomSelect};
